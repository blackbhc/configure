#! /bin/bash
git submodule update --init --recursive --depth=1
cd ~/configure && git pull && git submodule update --remote --depth=1

# path config
[[ -d ~/.local/bin ]] || mkdir -p ~/.local/bin

# tmux config
ln -sf ~/configure/tmux.conf ~/.tmux.conf

# fish config
ln -sf ~/configure/config.fish ~/.config/fish/config.fish

# wezterm config
[[ -f ~/.wezterm.lua ]] || ln -s ~/configure/wezterm.lua ~/.wezterm.lua

# git config
ln -sf ~/configure/gitconfig ~/.gitconfig
ln -sf ~/configure/gitignore_global ~/.gitignore_global

# zoxide config
if ! command -v zoxide 2>/dev/null 1>/dev/null; then
	curl -sS https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | bash
	if [[ $SHELL == '/bin/bash' ]]; then
		echo 'eval "$(zoxide init bash)"' >>~/.bashrc
	elif [[ $SHELL == '/bin/zsh' ]]; then
		echo 'eval "$(zoxide init zsh)"' >>~/.zshrc
	fi
fi

# development tools config
## black
[[ -d ~/.config/black && -f ~/.config/black/.pyproject.toml ]] || (mkdir -p ~/.config/black && ln -s ~/configure/format/pyproject.toml ~/.config/black/.pyproject.toml)
## clang-format
[[ -f ~/.clang-format ]] || ln -s ~/configure/format/clang-format ~/.clang-format

# LazyVim config
rm -rf ~/.config/nvim
cp -r ~/configure/nvim ~/.config/nvim

# emacs config
mkdir ~/.emacs.d
cp ./emacs.d/init.el ~/.emacs.d/
cp -r ./emacs.d/lisp/ ~/.emacs.d/
